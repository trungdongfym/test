<!doctype html>
<html lang="en">

<head>
    <meta charSet="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mochawesome Report</title>
    <link rel="stylesheet" href="assets/app.css" />
</head>

<body
    data-raw="{&quot;stats&quot;:{&quot;suites&quot;:11,&quot;tests&quot;:113,&quot;passes&quot;:92,&quot;pending&quot;:0,&quot;failures&quot;:21,&quot;start&quot;:&quot;2023-10-05T01:43:00.818Z&quot;,&quot;end&quot;:&quot;2023-10-05T01:44:24.666Z&quot;,&quot;duration&quot;:83848,&quot;testsRegistered&quot;:113,&quot;passPercent&quot;:81.41592920353983,&quot;pendingPercent&quot;:0,&quot;other&quot;:1,&quot;hasOther&quot;:true,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;5b0cea07-0a29-4b4b-bc21-d3bd19671a1c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;291aab51-21a8-4352-bb16-a8d44b1869c1&quot;,&quot;title&quot;:&quot;TEST cpPublicApi: Custom Pricing&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;TEST cpPublicApi: Custom Pricing\&quot;&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing \&quot;before all\&quot; hook in \&quot;TEST cpPublicApi: Custom Pricing\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1219,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = enableModule;\nawait fetch(`${moduleAPIURL}/module?domain=${domain}`, {\n    method: &#x27;PUT&#x27;,\n    headers: {\n        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;\n    },\n    body: JSON.stringify(payload),\n})\nawait fetch(`https://b2b-solution-api.bsscommerce.com/upload/update-config?domain=${domain}`, {\n    method: &#x27;POST&#x27;,\n    headers: {\n        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;\n    }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94613fd4-2287-41ee-bd15-7285f21866f8&quot;,&quot;parentUUID&quot;:&quot;291aab51-21a8-4352-bb16-a8d44b1869c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;TEST cpPublicApi: Custom Pricing\&quot;&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing \&quot;after all\&quot; hook in \&quot;TEST cpPublicApi: Custom Pricing\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:576,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let arrayAllRules = [];\nlet retrieveAllRules = await getRulesData();\nconst resultAllRulesId = retrieveAllRules.rules;\nfor (i= 0; i &lt; resultAllRulesId.length; i++){\n    arrayAllRules.push(resultAllRulesId[i].id)\n};\nawait fetch(`https://test-b2b-solution-api-autotest-1.test-bsscommerce.com/cp/rules/delete?domain=${domain}`, {\n    method: &#x27;POST&#x27;,\n    headers: {\n        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;\n    },\n    body:JSON.stringify({deleteRuleId: arrayAllRules}),\n})&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read properties of undefined (reading &#x27;length&#x27;)&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read properties of undefined (reading &#x27;length&#x27;)\n    at Context.&lt;anonymous&gt; (tests/publicApiCP/testCPPublicApi.test.js:1856:41)\n    at processTicksAndRejections (node:internal/process/task_queues:96:5)&quot;},&quot;uuid&quot;:&quot;fdb05ec2-5e5d-49b3-88d8-3e873c9d3978&quot;,&quot;parentUUID&quot;:&quot;291aab51-21a8-4352-bb16-a8d44b1869c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;title&quot;:&quot;CP get rule by domain&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;When the domain and keys are correct: Success status should be true &amp;&amp; returns rules&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When the domain and keys are correct: Success status should be true &amp;&amp; returns rules&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:501,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain1;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;rules&#x27;);\n        for (let i = 0; i &lt; (res.body.rules).length; i++) {\n            expect(res.body.rules[i]).to.have.all.keys(\n                &#x27;id&#x27;,\n                &#x27;shop_id&#x27;,\n                &#x27;name&#x27;,\n                &#x27;priority&#x27;,\n                &#x27;status&#x27;,\n                &#x27;apply_to&#x27;,\n                &#x27;customer_ids&#x27;,\n                &#x27;customer_tags&#x27;,\n                &#x27;product_condition_type&#x27;,\n                &#x27;product_ids&#x27;,\n                &#x27;variant_ids&#x27;,\n                &#x27;product_collections&#x27;,\n                &#x27;product_tags&#x27;,\n                &#x27;published_at&#x27;,\n                &#x27;unpublished_at&#x27;,\n                &#x27;discount_type&#x27;,\n                &#x27;discount_value&#x27;,\n                &#x27;date_rule_type&#x27;,\n                &#x27;start_date&#x27;,\n                &#x27;end_date&#x27;,\n                &#x27;exc_customer_tags&#x27;,\n                &#x27;exc_customers&#x27;,\n                &#x27;exclude_from&#x27;,\n                &#x27;file_theme_index&#x27;,\n                &#x27;market_condition_type&#x27;,\n                &#x27;market_ids&#x27;,\n                &#x27;createdAt&#x27;,\n                &#x27;updatedAt&#x27;\n            );\n        };\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fc97274-5d44-42ef-9616-f462b2fb4e8e&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When accessKey is wrong: return message accessKey incorrect&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When accessKey is wrong: return message accessKey incorrect&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain2;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(&#x27;content-type&#x27;, &#x27;application/json&#x27;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d53d1c7-9f23-473c-80d3-4f7900936d35&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When accessKey is from wrong shop: return message accessKey incorrect&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When accessKey is from wrong shop: return message accessKey incorrect&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain3;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(&#x27;content-type&#x27;, &#x27;application/json&#x27;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;855fca20-9c98-424e-ab4e-9aa35bafda38&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When request wrong Domain: return message domain not found&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When request wrong Domain: return message domain not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain4;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(&#x27;content-type&#x27;, &#x27;application/json&#x27;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Could not found shop with domain &#x27; + testDomain);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a2fbd2f-51c4-445c-975e-8e69a560e800&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When missing domain: return message domain required&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When missing domain: return message domain required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain5;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Domain is required&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b97f2155-933d-4e93-8feb-596cc13f0e47&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When missing accessKey: return message accessKey is required&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by domain When missing accessKey: return message accessKey is required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:251,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesByDomain6;\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;accessKey is required. Please add it into the request body&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;950f6147-e3d7-4046-b78c-f14ff5855981&quot;,&quot;parentUUID&quot;:&quot;0e2de312-6c4b-4c10-885f-6b4b13abb57a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5fc97274-5d44-42ef-9616-f462b2fb4e8e&quot;,&quot;9d53d1c7-9f23-473c-80d3-4f7900936d35&quot;,&quot;855fca20-9c98-424e-ab4e-9aa35bafda38&quot;,&quot;3a2fbd2f-51c4-445c-975e-8e69a560e800&quot;,&quot;b97f2155-933d-4e93-8feb-596cc13f0e47&quot;,&quot;950f6147-e3d7-4046-b78c-f14ff5855981&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1342,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;title&quot;:&quot;CP get rule by ID&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;When the domain, ID and key are correct: return success true &amp;&amp; id information&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by ID When the domain, ID and key are correct: return success true &amp;&amp; id information&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesById1;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;rule&#x27;);\n        for (let i = 0; i &lt; (res.body.rule).length; i++) {\n            expect(res.body.rule[i]).to.have.all.keys(\n                &#x27;id&#x27;,\n                &#x27;name&#x27;,\n                &#x27;priority&#x27;,\n                &#x27;status&#x27;,\n                &#x27;apply_to&#x27;,\n                &#x27;product_condition_type&#x27;,\n                &#x27;customer_ids&#x27;,\n                &#x27;customer_tags&#x27;,\n                &#x27;product_ids&#x27;,\n                &#x27;variant_ids&#x27;,\n                &#x27;product_collections&#x27;,\n                &#x27;product_tags&#x27;,\n                &#x27;discount_type&#x27;,\n                &#x27;discount_value&#x27;,\n                &#x27;exclude_from&#x27;,\n                &#x27;file_theme_index&#x27;,\n                &#x27;market_condition_type&#x27;,\n                &#x27;market_ids&#x27;,\n                &#x27;exc_customers&#x27;,\n                &#x27;createdAt&#x27;,\n                &#x27;updatedAt&#x27;\n            );\n        };\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:285:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;d44bed04-7572-441e-8f80-119eb6cbcc6a&quot;,&quot;parentUUID&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When the accessKey was wrong: returns message free access key is not correct&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by ID When the accessKey was wrong: returns message free access key is not correct&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesById2;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Access key is not correct&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1908e4d-d28f-4bdc-a237-1a34581199ed&quot;,&quot;parentUUID&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When no ID was entered: returns rule id is required&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by ID When no ID was entered: returns rule id is required&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:382,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesById3;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Rule id is required&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c989b629-b280-49c6-9dde-b401bb10a7fa&quot;,&quot;parentUUID&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When the ID entered in wrong: returns could not found id message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by ID When the ID entered in wrong: returns could not found id message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesById4;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Could not found rule with id&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17f5b297-0d35-4df2-9803-cf18a42b9567&quot;,&quot;parentUUID&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When ID entered belongs to another shop: returns message id not found&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP get rule by ID When ID entered belongs to another shop: returns message id not found&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetRulesById5;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false)\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Could not found rule with id&#x27;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6ad481d-3879-4ad3-9ff2-270a5bf3884e&quot;,&quot;parentUUID&quot;:&quot;c2d06b32-d44b-42ab-bddb-6914654b6e2e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1908e4d-d28f-4bdc-a237-1a34581199ed&quot;,&quot;c989b629-b280-49c6-9dde-b401bb10a7fa&quot;,&quot;17f5b297-0d35-4df2-9803-cf18a42b9567&quot;,&quot;c6ad481d-3879-4ad3-9ff2-270a5bf3884e&quot;],&quot;failures&quot;:[&quot;d44bed04-7572-441e-8f80-119eb6cbcc6a&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1266,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;title&quot;:&quot;CP Create Single Rule&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Create a single rule successfully: returns rule is updated message - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule successfully: returns rule is updated message - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2377,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule1;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;325e7cb0-26c4-4eda-9bdc-212f3313cf6f&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: rule have no name - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: rule have no name - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule2;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(\&quot;Rule name must be not empty\&quot;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf1b01ba-8cb6-4223-85b2-1457febc1169&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: rule doesn&#x27;t have name field - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: rule doesn&#x27;t have name field - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:269,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule3;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(\&quot;Rule name must be not empty\&quot;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;381ca8b5-a936-4377-b04b-735c8c335a5e&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: 2 name fields when create a rule - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: 2 name fields when create a rule - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1806,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule4;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;131b3fbb-b5d1-44f7-8a5c-7ffea2bf129b&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: rule name has special characters - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: rule name has special characters - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2140,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule5A;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01d71afb-a73b-4e7c-bfaf-2be990912868&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: rule name is too long - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: rule name is too long - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:133,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule5B;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(\&quot;Name of rule must be within 300 characters\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;Name of rule must be within 300 chara…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;Name of rule must be within 300 chara…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:466:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- C\n+ Name of rule must be within 300 characters\n&quot;},&quot;uuid&quot;:&quot;a2d8d356-078f-4b37-aa5c-f13cda2887a2&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: no priority - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: no priority - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule6;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Priority of rule \\\&quot;${mockDataCreateRule6.rule.name}\\\&quot; must be between 0 and 99`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9da8fe35-154d-4c54-8aed-8152915eb5d3&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: missing priority field - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: missing priority field - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:138,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule7;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`priority of rule \\\&quot;${mockDataCreateRule7.rule.name}\\\&quot; is required`)\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Priority of rule \&quot;Auto Test - Missing…&#x27; to equal &#x27;priority of rule \&quot;Auto Test - Missing…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Priority of rule \&quot;Auto Test - Missing…&#x27; to equal &#x27;priority of rule \&quot;Auto Test - Missing…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:496:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- Priority of rule \&quot;Auto Test - Missing Priority Field\&quot; must be a number\n+ priority of rule \&quot;Auto Test - Missing Priority Field\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;08bfe7db-d6ff-4923-99f6-29db1b1b06e9&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: 2 priority fields when create a rule - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: 2 priority fields when create a rule - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1863,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule8;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a228a14-dd08-4139-b955-7237b6663537&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: priority &gt; 99 - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: priority &gt; 99 - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule9;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200)\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Priority of rule \\\&quot;${mockDataCreateRule9.rule.name}\\\&quot; must be between 0 and 99`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe7a4fc2-412d-4d76-b5d4-7f2c604c9983&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: priority &lt; 0 - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: priority &lt; 0 - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule10;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false)\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Priority of rule \\\&quot;${mockDataCreateRule10.rule.name}\\\&quot; must be between 0 and 99`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b93a7fcf-d016-47af-a61f-d7fae7084e55&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: priority is an alphabetic character - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: priority is an alphabetic character - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:129,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule11;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Priority of rule \\\&quot;${mockDataCreateRule11.rule.name}\\\&quot; must be a number`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d586611-1bf3-4830-a179-fecc6ca08866&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: status field missing - return failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: status field missing - return failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule12;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`status of rule \\\&quot;${mockDataCreateRule12.rule.name}\\\&quot; is required`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Status of rule \&quot;Auto Test - Missing S…&#x27; to equal &#x27;status of rule \&quot;Auto Test - Missing S…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Status of rule \&quot;Auto Test - Missing S…&#x27; to equal &#x27;status of rule \&quot;Auto Test - Missing S…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:570:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- Status of rule \&quot;Auto Test - Missing Status Field\&quot; must be 0 or 1\n+ status of rule \&quot;Auto Test - Missing Status Field\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;f8317640-3feb-4f0a-a235-396c0ca83654&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: no status - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: no status - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule13;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Status of rule \\\&quot;${mockDataCreateRule13.rule.name}\\\&quot; must be 0 or 1`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efd8a49b-1be6-40c2-8e2c-5a0191d16e19&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: status not 0 and 1 - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: status not 0 and 1 - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:261,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule14;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`Status of rule \\\&quot;${mockDataCreateRule14.rule.name}\\\&quot; must be 0 or 1`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0dbb868-909e-4b72-afa8-4453f2fa667b&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed:  apply_to field missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed:  apply_to field missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule15;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`apply_to of rule \\\&quot;${mockDataCreateRule15.rule.name}\\\&quot; is required`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;apply_to of rule \&quot;Auto Test - Missing…&#x27; to equal &#x27;apply_to of rule \&quot;Auto Test - Missing…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;apply_to of rule \&quot;Auto Test - Missing…&#x27; to equal &#x27;apply_to of rule \&quot;Auto Test - Missing…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:616:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- apply_to of rule \&quot;Auto Test - Missing Apply To Field\&quot; must be 0, 1, 2, 3, or 4\n+ apply_to of rule \&quot;Auto Test - Missing Apply To Field\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;ccdc5c13-a624-4665-90ce-51f4907992a7&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: apply_to == null - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: apply_to == null - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule16;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`apply_to of rule \\\&quot;${mockDataCreateRule16.rule.name}\\\&quot; must be 0, 1, 2, 3, or 4`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15363dd5-efa7-4d38-8040-1233d6235ef2&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: apply_to is not a number - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: apply_to is not a number - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule17;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`apply_to of rule \\\&quot;${mockDataCreateRule17.rule.name}\\\&quot; must be 0, 1, 2, 3, or 4`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f94998a-3fa0-4af9-8065-486732534b9a&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: apply_to is not 1,2,3 or 4 - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: apply_to is not 1,2,3 or 4 - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:253,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule18;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`apply_to of rule \\\&quot;${mockDataCreateRule18.rule.name}\\\&quot; must be 0, 1, 2, 3, or 4`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e20372f7-7160-40b3-b57b-aa02ed35f885&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: product_condition_type missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: product_condition_type missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:272,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule19;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200)\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`product_condition_type of rule \\\&quot;${mockDataCreateRule19.rule.name}\\\&quot; is required`)\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;product_condition_type of rule \&quot;Auto …&#x27; to equal &#x27;product_condition_type of rule \&quot;Auto …&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;product_condition_type of rule \&quot;Auto …&#x27; to equal &#x27;product_condition_type of rule \&quot;Auto …&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:676:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- product_condition_type of rule \&quot;Auto Test - Wrong Apply To\&quot; must be 0, 1, 2, 3 or 4\n+ product_condition_type of rule \&quot;Auto Test - Wrong Apply To\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;fcb19787-aebb-42b3-af8b-c983c47951e7&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: product_condition_type is null - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: product_condition_type is null - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule20;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200)\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`product_condition_type of rule \\\&quot;${mockDataCreateRule20.rule.name}\\\&quot; must be 0, 1, 2, 3 or 4`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dbc632a-57a7-426f-a95f-3e0adf697b03&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: product_condition_type is not 0,1,2,3 - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: product_condition_type is not 0,1,2,3 - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:184,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule21;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200)\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`product_condition_type of rule \\\&quot;${mockDataCreateRule21.rule.name}\\\&quot; must be 0, 1, 2, 3 or 4`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44eadf9e-d9f9-47dc-b1d9-3e70377a054b&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: product_condition_type is not a number - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: product_condition_type is not a number - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule22;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200)\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`product_condition_type of rule \\\&quot;${mockDataCreateRule22.rule.name}\\\&quot; must be 0, 1, 2, 3 or 4`)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2296f94-f862-4400-b3f9-f9491cfb2b6c&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: customer_ids is missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: customer_ids is missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2088,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule23;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c167ff01-46c6-4d9e-9523-782cbbd2e665&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: customer_ids is null - returns success message &quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: customer_ids is null - returns success message &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2827,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule24;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0bd317f-dbf4-4577-8100-150c50d28c78&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: customer_ids valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: customer_ids valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1826,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule25;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ead1b89b-585c-4042-b376-7687d90e8911&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;create a single rule success: customer_tags field missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule create a single rule success: customer_tags field missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2064,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule26;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89ac72a9-d433-4066-8e40-2ce47a595595&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: customer_tags is null - returns success message &quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: customer_tags is null - returns success message &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1861,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule27;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5161f5f1-02b4-4c93-9a9e-cc357dda379b&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: customer_tags valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: customer_tags valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2933,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule28;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;045d8e92-0ed1-4646-b4eb-80231642de74&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_ids field missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_ids field missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2018,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule29;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea774a84-dfb2-42e3-ab4b-688daf833575&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_ids field = null - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_ids field = null - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2090,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule30;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48d13280-dfa7-43a4-9d29-3290216fa8ef&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_ids field valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_ids field valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1784,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule31;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f86ea993-44d9-4194-a24e-30257fc11d13&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: variant_ids field is missing - returns sucess message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: variant_ids field is missing - returns sucess message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1634,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant1;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;479f7081-18e7-4b76-ab5d-f412fe590054&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: valid variant_ids - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: valid variant_ids - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2132,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant2;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18d030e2-54fd-4d8c-bdf1-9e973260fb31&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule variants_id success: variant_ids is not a number - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule variants_id success: variant_ids is not a number - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1859,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant3;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aea2d02b-2648-4f66-8cc6-5bc79e3d31e4&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule variant_ids success: vairant_ids = null - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule variant_ids success: vairant_ids = null - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1678,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant4;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aad23210-1853-41ec-857b-68ced13b09bf&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: variant_ids doesn&#x27;t exist in system - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: variant_ids doesn&#x27;t exist in system - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2179,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant5;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28654863-5452-457e-ac20-78d5d1e90968&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: product_condition_type is 4, variant_ids missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: product_condition_type is 4, variant_ids missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant6;\nchai.request(server)\n        .post(\&quot;/rule/save\&quot;)\n        .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n        .send(payload)\n        .end((err, res) =&gt; {\n            expect(res).to.have.status(200);\n            expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n            expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n            expect(res.body.userErrors[0]).to.equal(`variant_ids are required when the rule&#x27;s product_condition_type is 4`);\n            done();\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc04d8dc-4803-4b88-a799-73edfb4131ca&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_condition_type is 4, variant_ids valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_condition_type is 4, variant_ids valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1935,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant7;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b4dd4bc-d0e8-4b25-8e17-7207ad9ee19a&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_condition_type is 4, variant_ids empty - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_condition_type is 4, variant_ids empty - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2140,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRuleVariant8;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7254d39a-9b33-465b-ae22-c8879536303e&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_collections field missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_collections field missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1975,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule32;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a80be529-a916-482c-a89c-c77c5663a86c&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_collections is null - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_collections is null - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1921,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule33;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03c55348-cdef-4141-8a26-ed37e2f6490e&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_collection is valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_collection is valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2094,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule34;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46ea8c51-4d4a-446e-bede-924828fdbfe6&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_tags field missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_tags field missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2699,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule35;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;881af47b-d327-499d-87d9-c51a27f611bc&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_tags is null - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_tags is null - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1879,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule36;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;694a596c-3477-4248-9f8d-a6bd43fd5902&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule success: product_tags is valid - return success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule success: product_tags is valid - return success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1649,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule37;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18173932-dc4f-4429-af4f-4782f5110c9e&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_type field missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_type field missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:273,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule38;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_type of rule \\\&quot;${mockDataCreateRule38.rule.name}\\\&quot; is required`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;discount_type of rule \&quot;Test rule\&quot; mus…&#x27; to equal &#x27;discount_type of rule \&quot;Test rule\&quot; is …&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;discount_type of rule \&quot;Test rule\&quot; mus…&#x27; to equal &#x27;discount_type of rule \&quot;Test rule\&quot; is …&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1083:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- discount_type of rule \&quot;Test rule\&quot; must be 0, 1, or 2\n+ discount_type of rule \&quot;Test rule\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;5ee9a605-0f58-4c2d-a185-8fca767d5393&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: Two discount_type fields in a rule - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: Two discount_type fields in a rule - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1647,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule39;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Create the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1280cb8d-7fb6-43b4-bf2f-5b92e87d012e&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: Discount Type is null - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: Discount Type is null - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule40;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_type of rule \\\&quot;${mockDataCreateRule40.rule.name}\\\&quot; must be 0, 1, or 2`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ff7f69a-2f68-401b-a0d6-de0dc34480f9&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: Discount Type is not a number - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: Discount Type is not a number - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:148,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule41;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_type of rule \\\&quot;${mockDataCreateRule41.rule.name}\\\&quot; must be 0, 1, or 2`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d90ce49-6647-47cb-a9fc-8874147934c7&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: Discount Type is not 0,1, or 2 - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: Discount Type is not 0,1, or 2 - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:215,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule42;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_type of rule \\\&quot;${mockDataCreateRule42.rule.name}\\\&quot; must be 0, 1, or 2`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abdd6a0b-d482-4a08-b1cb-e0f1addb8b3f&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_value field missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_value field missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule43\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule43.rule.name}\\\&quot; is required`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1158:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- C\n+ discount_value of rule \&quot;Auto Test - Discount Value Missing\&quot; is required\n&quot;},&quot;uuid&quot;:&quot;216359a4-7783-4a92-beed-20ff63504676&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_value is null - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_value is null - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:201,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule44;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule44.rule.name}\\\&quot; must be a number`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1173:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- C\n+ discount_value of rule \&quot;Auto Test - Discount Value is null\&quot; must be a number\n&quot;},&quot;uuid&quot;:&quot;068fe1d8-e746-4dbd-9a33-c664278e2425&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_value is not a number - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_value is not a number - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:280,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule45;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule45.rule.name}\\\&quot; must be a number`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23032e94-c669-4d5d-af43-59709dec201b&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount value &lt; 0 - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount value &lt; 0 - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule46;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule46.rule.name}\\\&quot; must be greater than 0`);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;C&#x27; to equal &#x27;discount_value of rule \&quot;Auto Test - D…&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1203:55\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- C\n+ discount_value of rule \&quot;Auto Test - Discount fixed value &lt; 0\&quot; must be greater than 0\n&quot;},&quot;uuid&quot;:&quot;f5a2eb9c-fab0-4632-bbcc-7007c88d0a06&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_value &lt; 0% - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_value &lt; 0% - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:282,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule47\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule47.rule.name}\\\&quot; must be between 0 and 100`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d73fff4-ab73-4438-bdba-dbfef2ae182f&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create a single rule failed: discount_value &gt; 100%: returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create Single Rule Create a single rule failed: discount_value &gt; 100%: returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:217,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateRule48;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;);\n        expect(res.body.userErrors[0]).to.equal(`discount_value of rule \\\&quot;${mockDataCreateRule48.rule.name}\\\&quot; must be between 0 and 100`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;320a673b-b56f-47bf-bced-c84341daa716&quot;,&quot;parentUUID&quot;:&quot;5dc1b860-7e7a-4a6f-8e08-b06de9a88547&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;325e7cb0-26c4-4eda-9bdc-212f3313cf6f&quot;,&quot;cf1b01ba-8cb6-4223-85b2-1457febc1169&quot;,&quot;381ca8b5-a936-4377-b04b-735c8c335a5e&quot;,&quot;131b3fbb-b5d1-44f7-8a5c-7ffea2bf129b&quot;,&quot;01d71afb-a73b-4e7c-bfaf-2be990912868&quot;,&quot;9da8fe35-154d-4c54-8aed-8152915eb5d3&quot;,&quot;1a228a14-dd08-4139-b955-7237b6663537&quot;,&quot;fe7a4fc2-412d-4d76-b5d4-7f2c604c9983&quot;,&quot;b93a7fcf-d016-47af-a61f-d7fae7084e55&quot;,&quot;8d586611-1bf3-4830-a179-fecc6ca08866&quot;,&quot;efd8a49b-1be6-40c2-8e2c-5a0191d16e19&quot;,&quot;b0dbb868-909e-4b72-afa8-4453f2fa667b&quot;,&quot;15363dd5-efa7-4d38-8040-1233d6235ef2&quot;,&quot;5f94998a-3fa0-4af9-8065-486732534b9a&quot;,&quot;e20372f7-7160-40b3-b57b-aa02ed35f885&quot;,&quot;6dbc632a-57a7-426f-a95f-3e0adf697b03&quot;,&quot;44eadf9e-d9f9-47dc-b1d9-3e70377a054b&quot;,&quot;b2296f94-f862-4400-b3f9-f9491cfb2b6c&quot;,&quot;c167ff01-46c6-4d9e-9523-782cbbd2e665&quot;,&quot;f0bd317f-dbf4-4577-8100-150c50d28c78&quot;,&quot;ead1b89b-585c-4042-b376-7687d90e8911&quot;,&quot;89ac72a9-d433-4066-8e40-2ce47a595595&quot;,&quot;5161f5f1-02b4-4c93-9a9e-cc357dda379b&quot;,&quot;045d8e92-0ed1-4646-b4eb-80231642de74&quot;,&quot;ea774a84-dfb2-42e3-ab4b-688daf833575&quot;,&quot;48d13280-dfa7-43a4-9d29-3290216fa8ef&quot;,&quot;f86ea993-44d9-4194-a24e-30257fc11d13&quot;,&quot;479f7081-18e7-4b76-ab5d-f412fe590054&quot;,&quot;18d030e2-54fd-4d8c-bdf1-9e973260fb31&quot;,&quot;aea2d02b-2648-4f66-8cc6-5bc79e3d31e4&quot;,&quot;aad23210-1853-41ec-857b-68ced13b09bf&quot;,&quot;28654863-5452-457e-ac20-78d5d1e90968&quot;,&quot;bc04d8dc-4803-4b88-a799-73edfb4131ca&quot;,&quot;4b4dd4bc-d0e8-4b25-8e17-7207ad9ee19a&quot;,&quot;7254d39a-9b33-465b-ae22-c8879536303e&quot;,&quot;a80be529-a916-482c-a89c-c77c5663a86c&quot;,&quot;03c55348-cdef-4141-8a26-ed37e2f6490e&quot;,&quot;46ea8c51-4d4a-446e-bede-924828fdbfe6&quot;,&quot;881af47b-d327-499d-87d9-c51a27f611bc&quot;,&quot;694a596c-3477-4248-9f8d-a6bd43fd5902&quot;,&quot;18173932-dc4f-4429-af4f-4782f5110c9e&quot;,&quot;1280cb8d-7fb6-43b4-bf2f-5b92e87d012e&quot;,&quot;8ff7f69a-2f68-401b-a0d6-de0dc34480f9&quot;,&quot;7d90ce49-6647-47cb-a9fc-8874147934c7&quot;,&quot;abdd6a0b-d482-4a08-b1cb-e0f1addb8b3f&quot;,&quot;23032e94-c669-4d5d-af43-59709dec201b&quot;,&quot;2d73fff4-ab73-4438-bdba-dbfef2ae182f&quot;,&quot;320a673b-b56f-47bf-bced-c84341daa716&quot;],&quot;failures&quot;:[&quot;a2d8d356-078f-4b37-aa5c-f13cda2887a2&quot;,&quot;08bfe7db-d6ff-4923-99f6-29db1b1b06e9&quot;,&quot;f8317640-3feb-4f0a-a235-396c0ca83654&quot;,&quot;ccdc5c13-a624-4665-90ce-51f4907992a7&quot;,&quot;fcb19787-aebb-42b3-af8b-c983c47951e7&quot;,&quot;5ee9a605-0f58-4c2d-a185-8fca767d5393&quot;,&quot;216359a4-7783-4a92-beed-20ff63504676&quot;,&quot;068fe1d8-e746-4dbd-9a33-c664278e2425&quot;,&quot;f5a2eb9c-fab0-4632-bbcc-7007c88d0a06&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:60596,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;title&quot;:&quot;CP Update Single Rule&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Updating existing rule success: returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Updating existing rule success: returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:299,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule1;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Update the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).to.equal(mockDataUpdateRule1.rule.id);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1252:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;8b3544a0-46b2-4237-a932-c48b1a6a2f68&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule failed: wrong domain - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule failed: wrong domain - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:132,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule2\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Could not found shop with domain ${mockDataUpdateRule2.domain}`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fdf5109-b4dd-4ddc-a7ea-0345aa6ebe20&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule failed: wrong accessToken - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule failed: wrong accessToken - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:274,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule3;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6943648-119d-4e3c-9d21-db684f514174&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule failed: wrong rule id/id not found - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule failed: wrong rule id/id not found - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:259,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule4;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;userErrors&#x27;).to.equal(`Could not found rule with ID ${mockDataUpdateRule4.rule.id}`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc753302-d719-40db-ae41-140715bd91b8&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule success: rule doesn&#x27;t have variant_ids - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule success: rule doesn&#x27;t have variant_ids - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule5;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Update the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).to.equal(mockDataUpdateRule5.rule.id);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1310:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;72893054-f34f-46d9-a409-0c73b1ce9fd9&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule success: valid variant_ids - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule success: valid variant_ids - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule6;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Update the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).to.equal(mockDataUpdateRule6.rule.id);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1325:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;f0939626-46bd-48cc-8c62-1091acf3cc50&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule failed: product_condition_type = 4, variant_ids missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule failed: product_condition_type = 4, variant_ids missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule7;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body.userErrors[0]).to.equal(`variant_ids are required when the rule&#x27;s product_condition_type is 4`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11eaaf4c-2c10-46d3-bfbc-26f863f9785a&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule success: product_condition_type = 4, variant_ids valid - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule success: product_condition_type = 4, variant_ids valid - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:395,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule8;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Update the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).to.equal(mockDataUpdateRule8.rule.id);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1354:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;d7f69273-6ae4-4b8c-8cad-8bff2da68509&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update existing rule success: product_condition_type = 4, variant_ids empty - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Update Single Rule Update existing rule success: product_condition_type = 4, variant_ids empty - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:287,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataUpdateRule9;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Update the rule successfully\&quot;);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).which.is.a(&#x27;number&#x27;).above(0).and.satisfy(Number.isInteger);\n        expect(res.body).to.have.property(&#x27;ruleId&#x27;).to.equal(mockDataUpdateRule9.rule.id);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1369:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;40dadd4f-f069-4e3a-ba96-16fa81b0fa76&quot;,&quot;parentUUID&quot;:&quot;4a2c1aaa-3bb5-4060-aca9-a6f438086c56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fdf5109-b4dd-4ddc-a7ea-0345aa6ebe20&quot;,&quot;e6943648-119d-4e3c-9d21-db684f514174&quot;,&quot;dc753302-d719-40db-ae41-140715bd91b8&quot;,&quot;11eaaf4c-2c10-46d3-bfbc-26f863f9785a&quot;],&quot;failures&quot;:[&quot;8b3544a0-46b2-4237-a932-c48b1a6a2f68&quot;,&quot;72893054-f34f-46d9-a409-0c73b1ce9fd9&quot;,&quot;f0939626-46bd-48cc-8c62-1091acf3cc50&quot;,&quot;d7f69273-6ae4-4b8c-8cad-8bff2da68509&quot;,&quot;40dadd4f-f069-4e3a-ba96-16fa81b0fa76&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2326,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2f52609c-bf10-4807-a397-23755ae72dfa&quot;,&quot;title&quot;:&quot;CP Create/Update Multiple Rules&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Create multiple rules success: returns success message and rules which was created&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create/Update Multiple Rules Create multiple rules success: returns success message and rules which was created&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:757,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload =  mockDataCreateBulkRules1;\nchai.request(server)\n    .post(\&quot;/rule/bulk-save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        let nameArray = mockDataCreateBulkRules1.rules.map(x =&gt; x.name)\n        for(i=0;i&lt;mockDataCreateBulkRules1.length;i++){\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.include(`Create new rule \\\&quot;${nameArray[i]}\\\&quot; with ID successfully`);\n        }\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0468f4f-1a5b-4bd8-991f-416877010d14&quot;,&quot;parentUUID&quot;:&quot;2f52609c-bf10-4807-a397-23755ae72dfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Create multiple rules success: variant_ids missing - returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create/Update Multiple Rules Create multiple rules success: variant_ids missing - returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:960,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataCreateBulkRules3\nchai.request(server)\n    .post(\&quot;/rule/bulk-save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        let nameArray = payload.rules.map(x =&gt; x.name)\n        for(n = 0;n &lt; mockDataCreateBulkRules3.length; n++){\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.include(`Create new rule \\\&quot;${nameArray[n]}\\\&quot; with ID successfully`);\n        }\n        done();\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a119c85-f948-4c5d-8b93-cbafd38ca5ec&quot;,&quot;parentUUID&quot;:&quot;2f52609c-bf10-4807-a397-23755ae72dfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update multiple rules success: returns success message and rules which was created&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create/Update Multiple Rules Update multiple rules success: returns success message and rules which was created&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:454,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload =  mockDataCreateBulkRules2;\nchai.request(server)\n    .post(\&quot;/rule/bulk-save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        let nameArray = payload.rules.map(x =&gt; x.name)\n        for(i=0;i&lt;payload.length;i++){\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.include(`Update rule \\&#x27;${nameArray[i]}\\&#x27;with ID successfully`);\n        }\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;addce939-5143-4409-8ca7-7518b78744e1&quot;,&quot;parentUUID&quot;:&quot;2f52609c-bf10-4807-a397-23755ae72dfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Update multiple rules success: variant_ids missing - returns success message &quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Create/Update Multiple Rules Update multiple rules success: variant_ids missing - returns success message &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:632,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload =  mockDataCreateBulkRules4;\nchai.request(server)\n    .post(\&quot;/rule/bulk-save\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        let nameArray = payload.rules.map(x =&gt; x.name)\n        for(i=0;i&lt;payload.length;i++){\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.include(`Update rule \\&#x27;${nameArray[i]}\\&#x27;with ID successfully`);\n        }\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a666db6f-9e00-44fa-9342-16ea4fd988f1&quot;,&quot;parentUUID&quot;:&quot;2f52609c-bf10-4807-a397-23755ae72dfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0468f4f-1a5b-4bd8-991f-416877010d14&quot;,&quot;5a119c85-f948-4c5d-8b93-cbafd38ca5ec&quot;,&quot;addce939-5143-4409-8ca7-7518b78744e1&quot;,&quot;a666db6f-9e00-44fa-9342-16ea4fd988f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2803,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;title&quot;:&quot;CP Delete Single Rule&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Delete a single rule success: returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule success: returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:472,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule1;\n    chai.request(server)\n        .post(\&quot;/rule/delete\&quot;)\n        .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n        .send(payload)\n        .end((err,res) =&gt; {\n            expect(res).to.have.status(200);\n            expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Deleted rule successfully`);\n            done();\n        })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1466:73\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;64f7152d-9245-4c57-9ac6-306a00237f0c&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: wrong domain - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: wrong domain - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:279,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule2;\n    chai.request(server)\n        .post(\&quot;/rule/delete\&quot;)\n        .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n        .send(payload)\n        .end((err, res) =&gt; {\n            expect(res).to.have.status(200);\n            expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n            expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Could not found shop with domain ${mockDataDeleteRule2.domain}`);\n            done();\n        })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54aea6ec-0825-4359-8347-b3a7a35487ec&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: domain missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: domain missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:220,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule3;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Domain is required\&quot;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;432e8d3a-897d-414a-b2a6-2b4d3e4f1c31&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: accessToken empty - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: accessToken empty - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:147,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule4;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;accessKey is required. Please add it into the request body\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28583f96-e95d-4442-af4a-4e40c66d61fc&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: accessKey is missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: accessKey is missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule5;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;accessKey is required. Please add it into the request body\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d18df68-7a68-4223-b870-78e11fb5e6c6&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: accessKey is wrong - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: accessKey is wrong - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:263,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule6;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;555e3a8c-8647-42ed-b3ca-78a7ae63ec87&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: missing id field - returns failed message &quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: missing id field - returns failed message &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule7;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Rule ID is required\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01ed2dde-1673-4078-ab1e-b613713328f4&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Delete a single rule failed: wrong id - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Single Rule Delete a single rule failed: wrong id - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:384,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataDeleteRule8;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Could not delete rule with ID ${mockDataDeleteRule8.id}`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a091c7d-6f58-4245-b695-da5e13994fc2&quot;,&quot;parentUUID&quot;:&quot;bf310ad7-19a0-45ee-9b1b-936b4b48f57e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54aea6ec-0825-4359-8347-b3a7a35487ec&quot;,&quot;432e8d3a-897d-414a-b2a6-2b4d3e4f1c31&quot;,&quot;28583f96-e95d-4442-af4a-4e40c66d61fc&quot;,&quot;8d18df68-7a68-4223-b870-78e11fb5e6c6&quot;,&quot;555e3a8c-8647-42ed-b3ca-78a7ae63ec87&quot;,&quot;01ed2dde-1673-4078-ab1e-b613713328f4&quot;,&quot;2a091c7d-6f58-4245-b695-da5e13994fc2&quot;],&quot;failures&quot;:[&quot;64f7152d-9245-4c57-9ac6-306a00237f0c&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2160,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8b19c2ba-2d4f-4395-81bd-b8bdc071ad12&quot;,&quot;title&quot;:&quot;CP Delete Multiple Rules&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Delete multiple rule success: returns success message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Delete Multiple Rules Delete multiple rule success: returns success message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:406,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataBulkDelete1;\nchai.request(server)\n    .post(\&quot;/rule/mass-delete\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Deleted multiple rule successfully\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Deleted rule successfully&#x27; to equal &#x27;Deleted multiple rule successfully&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Deleted rule successfully&#x27; to equal &#x27;Deleted multiple rule successfully&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1587:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- Deleted rule successfully\n+ Deleted multiple rule successfully\n&quot;},&quot;uuid&quot;:&quot;0075e283-a3af-4924-b923-7e56c88c5e60&quot;,&quot;parentUUID&quot;:&quot;8b19c2ba-2d4f-4395-81bd-b8bdc071ad12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;0075e283-a3af-4924-b923-7e56c88c5e60&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:406,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;title&quot;:&quot;CP Get Applied Rules for Products&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Get Applied Rules for Products success: returns applied rules&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products success: returns applied rules&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1396,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules1;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;productsAppliedRule&#x27;)\n        for(i = 0; i &lt; (res.body.productsAppliedRule).length; i++){\n            expect(res.body.productsAppliedRule[i]).to.have.all.keys(\n                &#x27;id&#x27;,\n                &#x27;discount_type&#x27;,\n                &#x27;value&#x27;,\n                &#x27;name&#x27;\n            );\n        };\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1606:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;fa91785a-7285-48df-a578-5384e44dbc21&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: domain missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: domain missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:670,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules2;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Domain is required&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64dae791-9ebe-4998-9143-aca80db73ffd&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: wrong domain - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: wrong domain - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules3;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Could not found shop with domain ${mockDataGetAppliedRules3.domain}`);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a138dfad-87a7-4131-b3d0-feacae37a187&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rule for Products failed: accessKey was missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rule for Products failed: accessKey was missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:438,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules4;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;accessKey is required. Please add it into the request body\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;879d3889-a608-417a-8429-678d656ed956&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: accessKey is wrong -  returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: accessKey is wrong -  returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules5;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b983bc2-44b6-4200-82a0-96f1271c1997&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: product_ids is missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: product_ids is missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:719,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules6;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;product_ids is required\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Could not get Applied Rule&#x27; to equal &#x27;product_ids is required&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Could not get Applied Rule&#x27; to equal &#x27;product_ids is required&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1685:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- Could not get Applied Rule\n+ product_ids is required\n&quot;},&quot;uuid&quot;:&quot;cecc3259-ba96-4461-91dd-9521939a59c4&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: product_ids is wrong - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: product_ids is wrong - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:792,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules7;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Could not get Applied Rule\&quot;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33e24971-83b1-4a08-b870-2ab97104a619&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Applied Rules for Products failed: customer_id is missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Applied Rules for Products Get Applied Rules for Products failed: customer_id is missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:292,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload  = mockDataGetAppliedRules8;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;customer_id is required\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59eb4074-c81c-4c77-b9b9-345b40071b49&quot;,&quot;parentUUID&quot;:&quot;0c667807-5ec1-47dd-8f67-a37754c9a822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64dae791-9ebe-4998-9143-aca80db73ffd&quot;,&quot;a138dfad-87a7-4131-b3d0-feacae37a187&quot;,&quot;879d3889-a608-417a-8429-678d656ed956&quot;,&quot;8b983bc2-44b6-4200-82a0-96f1271c1997&quot;,&quot;33e24971-83b1-4a08-b870-2ab97104a619&quot;,&quot;59eb4074-c81c-4c77-b9b9-345b40071b49&quot;],&quot;failures&quot;:[&quot;fa91785a-7285-48df-a578-5384e44dbc21&quot;,&quot;cecc3259-ba96-4461-91dd-9521939a59c4&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4631,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;title&quot;:&quot;CP Get Price List of Variants based on Applied Rules&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApi.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules success:  returns list variants and rules&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules success:  returns list variants and rules&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:900,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules1;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;content-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(true);\n        expect(res.body).to.have.property(&#x27;priceList&#x27;);\n        for(i = 0; i &lt; (res.body.priceList).length; i++) {\n            expect(res.body.priceList[i]).to.have.all.keys(\n                &#x27;id&#x27;,\n                &#x27;discount_type&#x27;,\n                &#x27;value&#x27;,\n                &#x27;name&#x27;,\n                &#x27;variants&#x27;\n            );\n            expect(res.body.priceList[i].variants[0]).to.have.all.keys(\n                &#x27;id&#x27;,\n                &#x27;price&#x27;,\n                &#x27;compareAtPrice&#x27;,\n                &#x27;appliedRulePrice&#x27;\n            );\n        };\n            done();\n    });&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected false to equal true&quot;,&quot;estack&quot;:&quot;AssertionError: expected false to equal true\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1733:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- false\n+ true\n&quot;},&quot;uuid&quot;:&quot;188f8ebc-896b-49cf-bc8f-f62bdd3e6c94&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: domain missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: domain missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules2;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Domain is required&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f1c15ff-5c75-4a57-ad82-3fd419825985&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: wrong domain - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: wrong domain - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules3;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(`Could not found shop with domain ${mockDataGetAppliedRules3.domain}`);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b93c63c7-3c66-4742-bec6-04902f19bb23&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: accessKey was missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: accessKey was missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules4;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;accessKey is required. Please add it into the request body\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b223d011-2aea-4bb3-aa62-34f33fb1a377&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: accessKey is wrong -  returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: accessKey is wrong -  returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules5;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Access key is not correct\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98600d4b-829c-4c9b-b1e2-2f0a80c2b638&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: product_ids is missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: product_ids is missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1883,&quot;state&quot;:&quot;failed&quot;,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules6;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;product_ids is required\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected &#x27;Could not get Applied Rule&#x27; to equal &#x27;product_ids is required&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected &#x27;Could not get Applied Rule&#x27; to equal &#x27;product_ids is required&#x27;\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApi.test.js:1819:69\n    at Test.Request.callback (node_modules/superagent/lib/node/index.js:857:12)\n    at /home/trungdongfym/BSS/b2b_solution/code_public_api/node_modules/superagent/lib/node/index.js:1070:18\n    at IncomingMessage.&lt;anonymous&gt; (node_modules/superagent/lib/node/parsers/json.js:21:7)\n    at Stream.emit (node:events:513:28)\n    at Unzip.&lt;anonymous&gt; (node_modules/superagent/lib/node/unzip.js:54:12)\n    at Unzip.emit (node:events:513:28)\n    at endReadableNT (node:internal/streams/readable:1358:12)\n    at processTicksAndRejections (node:internal/process/task_queues:83:21)&quot;,&quot;diff&quot;:&quot;- Could not get Applied Rule\n+ product_ids is required\n&quot;},&quot;uuid&quot;:&quot;31f1afb1-f1c3-4abe-82ee-bf85efc79761&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: product_ids is wrong - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: product_ids is wrong - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:648,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload = mockDataGetAppliedRules7;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Could not get Applied Rule\&quot;)\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4369dbc-d23e-4e85-888a-3174df1e20cb&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Price List of Variants based on Applied Rules failed: customer_id is missing - returns failed message&quot;,&quot;fullTitle&quot;:&quot;TEST cpPublicApi: Custom Pricing CP Get Price List of Variants based on Applied Rules Get Price List of Variants based on Applied Rules failed: customer_id is missing - returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:354,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let payload  = mockDataGetAppliedRules8;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;product-type\&quot;, \&quot;application/json\&quot;)\n    .send(payload)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;customer_id is required\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f61825c9-9ff9-4040-9210-cc616003475c&quot;,&quot;parentUUID&quot;:&quot;1a23e55c-ac46-4a5c-8c00-2681aaba5de4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f1c15ff-5c75-4a57-ad82-3fd419825985&quot;,&quot;b93c63c7-3c66-4742-bec6-04902f19bb23&quot;,&quot;b223d011-2aea-4bb3-aa62-34f33fb1a377&quot;,&quot;98600d4b-829c-4c9b-b1e2-2f0a80c2b638&quot;,&quot;b4369dbc-d23e-4e85-888a-3174df1e20cb&quot;,&quot;f61825c9-9ff9-4040-9210-cc616003475c&quot;],&quot;failures&quot;:[&quot;188f8ebc-896b-49cf-bc8f-f62bdd3e6c94&quot;,&quot;31f1afb1-f1c3-4abe-82ee-bf85efc79761&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4345,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;title&quot;:&quot;Disable Public API&quot;,&quot;fullFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/tests/publicApiCP/testCPPublicApiEnable.test.js&quot;,&quot;file&quot;:&quot;/tests/publicApiCP/testCPPublicApiEnable.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Disable Public API\&quot;&quot;,&quot;fullTitle&quot;:&quot;Disable Public API \&quot;before all\&quot; hook in \&quot;Disable Public API\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:921,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = disableModule;\nawait fetch(`${moduleAPIURL}/module?domain=${process.env.DOMAIN_AUTO_TEST}`, {\n    method: &#x27;PUT&#x27;,\n    headers: {\n        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;\n    },\n    body: JSON.stringify(data)\n})\nawait fetch(`https://b2b-solution-api.bsscommerce.com/upload/update-config?domain=${domain}`, {\n    method: &#x27;POST&#x27;,\n    headers: {\n        &#x27;Content-Type&#x27;: &#x27;application/json&#x27;\n    }\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4ba0740-5993-45ed-bd3a-e68e6eb10669&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;When module disabled: Get rules by domain returns failed message&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Get rules by domain returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:208,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataGetRulesByDomain1\nchai.request(server)\n    .post(\&quot;/rule/get-by-domain\&quot;)\n    .set(&#x27;content-type&#x27;, &#x27;application/json&#x27;)\n    .send(data)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(\&quot;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.\&quot;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;209ca3d0-723d-4c5b-8856-918b1cea6fc8&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Get rules by ID returns failed message&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Get rules by ID returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataGetRulesById1;\nchai.request(server)\n    .post(\&quot;/rule/get-by-id\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err, res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;659d8d75-97a1-4857-86a6-a5a33a7962c7&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Create single rule returns failed message&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Create single rule returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:136,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataCreateRule1;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58d1acb4-10a6-4fed-9d77-237d8be6f258&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Update single rule returns failed message&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Update single rule returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataUpdateRule1;\nchai.request(server)\n    .post(\&quot;/rule/save\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b79009d-8e44-43e7-b66b-e1b6acfd9f70&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Delete single rule returns failed message&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Delete single rule returns failed message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:313,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataDeleteRule1;\nchai.request(server)\n    .post(\&quot;/rule/delete\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4d123e8-af00-4d59-b2e1-936bb2afde0e&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Get applied rule failed&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Get applied rule failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataGetAppliedRules1;\nchai.request(server)\n    .post(\&quot;/rule/get-products-applied-rules\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f106afb7-94bb-44f2-bbda-6f8482627210&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;When module disabled: Get Price List of Variants based on Applied Rules failed&quot;,&quot;fullTitle&quot;:&quot;Disable Public API When module disabled: Get Price List of Variants based on Applied Rules failed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let data = mockDataGetAppliedRules1;\nchai.request(server)\n    .post(\&quot;/rule/get-variants-price-list\&quot;)\n    .set(\&quot;content-type\&quot;,\&quot;application/json\&quot;)\n    .send(data)\n    .end((err,res) =&gt; {\n        expect(res).to.have.status(200);\n        expect(res.body).to.be.an(&#x27;object&#x27;);\n        expect(res.body).to.have.property(&#x27;success&#x27;).to.equal(false);\n        expect(res.body).to.have.property(&#x27;message&#x27;).to.equal(&#x27;Public API was disabled from B2B/Wholesale Sulution App dashboard, enable to use.&#x27;);\n        done();\n    })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f737c95-9ddd-4a50-98d5-a548caccba9d&quot;,&quot;parentUUID&quot;:&quot;477c5f3a-6975-46c0-a238-9e25cfdc24a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;209ca3d0-723d-4c5b-8856-918b1cea6fc8&quot;,&quot;659d8d75-97a1-4857-86a6-a5a33a7962c7&quot;,&quot;58d1acb4-10a6-4fed-9d77-237d8be6f258&quot;,&quot;3b79009d-8e44-43e7-b66b-e1b6acfd9f70&quot;,&quot;d4d123e8-af00-4d59-b2e1-936bb2afde0e&quot;,&quot;f106afb7-94bb-44f2-bbda-6f8482627210&quot;,&quot;5f737c95-9ddd-4a50-98d5-a548caccba9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;[datetime]-cp-report&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;reportFilename&quot;:&quot;[datetime]-cp-report&quot;,&quot;overwrite&quot;:&quot;false&quot;,&quot;timestamp&quot;:&quot;yyyymmddHHMMss&quot;},&quot;version&quot;:&quot;6.2.0&quot;}}}"
    data-config="{&quot;reportFilename&quot;:&quot;[datetime]-cp-report&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;code_public_api&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:false,&quot;timestamp&quot;:&quot;yyyymmddHHMMss&quot;,&quot;ts&quot;:&quot;yyyymmddHHMMss&quot;,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/mochawesome-report/20231005084424-cp-report.json&quot;,&quot;htmlFile&quot;:&quot;/home/trungdongfym/BSS/b2b_solution/code_public_api/mochawesome-report/20231005084424-cp-report.html&quot;}">
    <div id="report"></div>
    <script src="assets/app.js"></script>
</body>

</html>